#!/bin/bash

# Quick and dirty X configurator
# by Hisham Muhammad, 2003.
#
# Changelog
#
# ??/??/2003 - [hisham] First version
# 12/11/2003 - [gbedin] support Live-CD, Keymap from the setup directory
# 19/10/2004 - [detsch] generating xorg.conf
# 20/04/2005 - ConfigTools overhaul
# 22/04/2005 - [calica] Convert from ConfigureX11 to GenXorgConf
# 23/04/2005 - [detsch] Small changes, removed Scripts package dependency
# 17/05/2005 - [lucasvr] Checking for $DISPLAY before spawning Xorg -configure
# 19/05/2005 - [detsch] Rollback
# 27/05/2005 - [detsch] Setting $HOME (was not set to ~). Fixes issue at 012rc1

export HOME=/tmp/
Xorg -configure :2 &> /tmp/XorgConfigure.output || Xorg -configure :2 1>&2

if ! [ -e "${HOME}/xorg.conf.new" ]
then
   echo "Could not create sample configuration."
   exit 1
else
   cat "${HOME}/xorg.conf.new" && rm "${HOME}/xorg.conf.new"
fi

